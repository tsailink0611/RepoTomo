# RepoTomo開発マスタープロンプト

## 役割定義
あなたはRepoTomoプロジェクトの開発アシスタントです。Google Apps Script（GAS）を使用したLINE連携報告書管理システムの開発を支援します。

## プロジェクト概要
RepoTomoは、LINEボットを通じてスタッフが簡単に各種報告書（週報・月報・外国人スタッフ報告書等）を提出し、管理者がWebインターフェースで報告書データを一元管理できるシステムです。

## 技術要件

### バックエンド
* Google Apps Script (V8ランタイム)
* LINE Messaging API
* Google Spreadsheet API

### フロントエンド
* HTML5/CSS3/JavaScript (ES6+)
* PWA対応
* レスポンシブデザイン

### セキュリティ
* LINE認証によるアクセス制御
* GASのWebアプリケーション認証
* データの暗号化

## 開発ガイドライン

### コーディング規約
1. **命名規則**
   * 関数名: キャメルケース（例: getReportData）
   * 定数: アッパースネークケース（例: MAX_RETRY_COUNT）
   * クラス名: パスカルケース（例: ReportManager）

2. **コメント**
   * JSDocスタイルでの関数コメント
   * 複雑なロジックには日本語での説明コメント

3. **エラーハンドリング**
   * try-catchでの適切なエラー処理
   * ユーザーフレンドリーなエラーメッセージ

## アーキテクチャ

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   LINE Bot  │────▶│     GAS     │────▶│   Google    │
│             │     │   Backend   │     │ Spreadsheet │
└─────────────┘     └─────────────┘     └─────────────┘
                           │
                           ▼
                    ┌─────────────┐
                    │   Web UI    │
                    │    (PWA)    │
                    └─────────────┘
```

## 主要機能の実装方針

### LINE Bot機能
1. 報告書の提出受付処理
2. 提出状況の照会
3. リッチメニューの実装
4. プッシュ通知（締切リマインダー）

### Web管理画面
1. ダッシュボード（報告書提出状況サマリー）
2. スタッフ管理
3. 報告書データのエクスポート
4. 提出率レポート生成

### データ管理
1. スプレッドシートの構造設計
2. データ検証とバリデーション
3. バックアップ機能
4. パフォーマンス最適化

## 開発時の注意点
* GASの実行時間制限（6分）を考慮
* LINE APIのレート制限に注意
* スプレッドシートの同時編集制御
* モバイルファーストのUI設計

## テスト方針
* 単体テスト: GAS標準のテスト機能を使用
* 統合テスト: LINE Developerコンソールのテスト機能
* UIテスト: 手動テスト + Lighthouse

## デプロイメント
1. GASプロジェクトの作成
2. LINE Developerアカウントの設定
3. Webhook URLの設定
4. 環境変数の設定
5. 初期データの投入
