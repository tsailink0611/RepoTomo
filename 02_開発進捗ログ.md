RepoTomo開発進捗ログ
2025年1月
2025/01/01

プロジェクト構造の初期化
基本ファイルの作成
開発環境の準備

2025/01/20 - 技術スタック移行開始

GAS版からReact/Node.js版への移行決定
Git環境整備（migration-devブランチ作成）
バックエンド基盤構築完了（Express + TypeScript）

タスクリスト
GAS版（完了済み）

 Google Apps Scriptプロジェクトの作成
 LINE Developerアカウントの設定
 LINE Messaging APIチャネルの作成
 基本的なWebhook処理の実装
 スプレッドシートのデータ構造設計
 スタッフ用UIの基本実装
 管理者用UIの基本実装
 認証機能の実装
 報告書機能の実装

React/Node.js版（進行中）

 Gitリポジトリ初期化・ブランチ戦略策定
 バックエンド基盤構築（feat/backend-setup）

 Express + TypeScript環境
 ヘルスチェックAPI
 基本的なミドルウェア設定


 データベース設計（feat/database-setup）

 PostgreSQL + Prisma設定
 スキーマ定義
 マイグレーション作成


 認証システム（feat/auth-system）

 JWT実装
 LINE認証統合


 API実装（feat/api-implementation）

 報告書CRUD
 スタッフ管理
 通知管理


 LINE Bot移植（feat/line-bot）
 フロントエンド実装（feat/frontend）

 React基盤構築
 スタッフ用UI
 管理者用UI



技術的な決定事項
データベース設計（更新版）
Prismaスキーマ（予定）
prismamodel Staff {
  id          String   @id @default(cuid())
  lineUserId  String   @unique
  name        String
  email       String?
  role        Role
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Report {
  id          String   @id @default(cuid())
  type        String
  staffId     String
  content     Json
  status      Status
  submittedAt DateTime?
  dueDate     DateTime
}

model Submission {
  id          String   @id @default(cuid())
  reportId    String
  staffId     String
  submittedAt DateTime @default(now())
  mood        Mood
  hasQuestion Boolean
  question    String?
}
API設計（更新版）
バックエンドAPI（Express）
typescript// 認証
POST   /api/auth/login      // LINE認証
POST   /api/auth/refresh    // トークンリフレッシュ

// 報告書
GET    /api/reports         // 報告書一覧
POST   /api/reports         // 報告書作成
PUT    /api/reports/:id     // 報告書更新
DELETE /api/reports/:id     // 報告書削除

// スタッフ
GET    /api/staff           // スタッフ一覧
GET    /api/staff/:id       // スタッフ詳細
PUT    /api/staff/:id       // スタッフ更新

// 提出
POST   /api/submissions     // and提出
GET    /api/submissions     // 提出履歴

// LINE Webhook
POST   /webhook/line        // LINE Bot処理
移行に関する技術的決定
インフラ構成

フロントエンド: Vercel（自動デプロイ）
バックエンド: Railway or Render
データベース: Supabase（PostgreSQL）
ファイルストレージ: Supabase Storage

開発ツール

IDE: Cursor + Claude Code
バージョン管理: Git + GitHub
パッケージ管理: npm
コード品質: ESLint + Prettier
テスト: Jest + Vitest

課題・検討事項
移行期の課題

 Gitブランチ戦略の確立
 GASデータのPostgreSQLへの移行方法
 既存LINE Bot設定の引き継ぎ
 段階的な本番環境切り替え
 ユーザーへの移行案内

技術的検討事項

 Supabase Realtimeの活用範囲
 キャッシュ戦略（Redis必要性）
 マルチテナント実装方式
 監視・ログ収集基盤

開発メモ
2025/01/20 - Git運用ルール確立
bash# コミットプレフィックス
feat:     新機能
fix:      バグ修正
migrate:  GASからの移植
docs:     ドキュメント
test:     テスト
refactor: リファクタリング
WIP:      作業中

# 30分ルールでこまめにコミット
エラー対処記録
markdown# migration-notes.md で管理
- 日付
- エラー内容
- 原因
- 解決方法
参考資料
GAS版（レガシー）

Google Apps Script公式ドキュメント
LINE Messaging API公式ドキュメント

React/Node.js版（現行）

React公式ドキュメント
Express公式ドキュメント
Prisma公式ドキュメント
Supabase公式ドキュメント
Vercel公式ドキュメント

次のマイルストーン
短期目標（〜2025年2月）

データベース基盤の確立
基本的なCRUD APIの実装
認証システムの実装
GASデータの移行スクリプト作成

中期目標（〜2025年3月）

フロントエンド基本実装
LINE Bot機能の完全移植
テスト環境での動作確認
パフォーマンステスト

長期目標（〜2025年4月）

本番環境への段階的移行
他企業向けカスタマイズ機能
運用ドキュメント整備
正式リリース